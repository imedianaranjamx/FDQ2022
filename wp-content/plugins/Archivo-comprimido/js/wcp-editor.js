!function(a,b,c,d){function e(){this.host=a("#wcp-editor"),this.forms={},this.tooltip=d,this.modal=d,this.modalTimeout=d,this.loadingScreen=d,this.loadingScreenTimeout=d,this.saveToDeleteID=d}function f(a){this.options=a,this.id="wcp-form-"+(Math.floor(9999*Math.random())+1),this.controls=[],this.formUpdated=d,this.model={},this.selectedTab=0}function g(a,b,c){this.id=Math.floor(9999*Math.random())+1,this.elementID="wcp-editor-control-"+this.id,this.elementClass="sq-element-option-group",this.type=b.type,this.getValue=b.getValue,this.setValue=b.setValue,this.HTML=b.HTML,this.name=a.name,this.title=a.title,this.options=a.options,this._value=d,this.init=b.init,this.init(),this.valueUpdated=c,this.customLabel=b.customLabel}function h(){c.selection?c.selection.empty():b.getSelection&&b.getSelection().removeAllRanges()}var i=d,j=[],k=[];e.prototype.init=function(b){this.options=b;var c="",e="";this.options.canvasFill&&(e="wcp-editor-canvas-fill");var f="";this.options.canvasFill||(f+="width: "+this.options.canvasWidth+"px; height: "+this.options.canvasHeight+"px;"),c+='<div id="wcp-editor-left">',c+='   <div id="wcp-editor-main-buttons">',this.options.newButton&&(c+='       <div id="wcp-editor-button-new" class="wcp-editor-main-button">',c+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-file" aria-hidden="true"></i></div>',c+='           <div class="wcp-editor-main-button-text">New</div>',c+="       </div>"),c+='       <div id="wcp-editor-button-save" class="wcp-editor-main-button">',c+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-floppy-o" aria-hidden="true"></i></div>',c+='           <div class="wcp-editor-main-button-text">Save</div>',c+="       </div>",c+='       <div id="wcp-editor-button-load" class="wcp-editor-main-button">',c+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-sign-out" aria-hidden="true"></i></div>',c+='           <div class="wcp-editor-main-button-text">Load</div>',c+="       </div>",c+='       <div id="wcp-editor-button-undo" class="wcp-editor-main-button">',c+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-undo" aria-hidden="true"></i></div>',c+='           <div class="wcp-editor-main-button-text">Undo</div>',c+="       </div>",c+='       <div id="wcp-editor-button-redo" class="wcp-editor-main-button">',c+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-repeat" aria-hidden="true"></i></div>',c+='           <div class="wcp-editor-main-button-text">Redo</div>',c+="       </div>",c+='       <div id="wcp-editor-button-preview" class="wcp-editor-main-button">',c+='           <div class="wcp-editor-main-button-icon"><i class="fa fa-eye" aria-hidden="true"></i></div>',c+='           <div class="wcp-editor-main-button-text">Preview</div>',c+="       </div>",c+="   </div>",c+='<div id="wcp-editor-main-tab-buttons">';for(var g=0;g<this.options.mainTabs.length;g++)c+='<div class="wcp-editor-main-tab-button" data-wcp-main-tab-button-name="'+this.options.mainTabs[g].name+'">',c+='   <div class="wcp-editor-main-tab-button-icon"><i class="'+this.options.mainTabs[g].icon+'" aria-hidden="true"></i></div>',c+='   <div class="wcp-editor-main-tab-button-text">'+this.options.mainTabs[g].name+"</div>",c+="</div>";c+="</div>",c+='<div id="wcp-editor-main-tab-contents">';for(var g=0;g<this.options.mainTabs.length;g++)c+='<div class="wcp-editor-main-tab-content" data-wcp-main-tab-content-name="'+this.options.mainTabs[g].name+'">',c+='   <div class="wcp-editor-main-tab-content-title">'+this.options.mainTabs[g].title+"</div>",c+='   <div class="wcp-editor-main-tab-content-inner-wrap">'+a.wcpEditorGetContentForTabWithName(this.options.mainTabs[g].name)+"</div>",c+="</div>";c+="</div>",c+="</div>",c+='<div id="wcp-editor-center">',this.options.newButton&&(c+='<div id="wcp-editor-help-button"><i class="fa fa-question" aria-hidden="true"></i></div>'),c+='    <div id="wcp-editor-extra-main-buttons">';for(var g=0;g<this.options.extraMainButtons.length;g++){var h=this.options.extraMainButtons[g];c+='       <div class="wcp-editor-extra-main-button" data-wcp-editor-extra-main-button-name="'+h.name+'">',c+='           <div class="wcp-editor-extra-main-button-icon"><i class="'+h.icon+'" aria-hidden="true"></i></div>',c+='           <div class="wcp-editor-extra-main-button-title">'+h.title+"</div>",c+="       </div>"}c+="    </div>",c+='    <div id="wcp-editor-toolbar">';for(var g=0;g<this.options.toolbarButtons.length;g++){var h=this.options.toolbarButtons[g],i="";i=h.customIcon!=d?h.customIcon:'<i class="'+h.icon+'" aria-hidden="true"></i>',c+='       <div class="wcp-editor-toolbar-button" data-wcp-editor-toolbar-button-name="'+h.name+'" data-wcp-tooltip="'+h.title+'" data-wcp-tooltip-position="right">',c+='           <div class="wcp-editor-toolbar-button-icon">'+i+"</div>",c+='           <div class="wcp-editor-toolbar-button-title">'+h.title+"</div>",c+="       </div>"}c+="    </div>",c+='    <div id="wcp-editor-canvas" class="'+e+'" style="'+f+'">'+a.wcpEditorGetContentForCanvas()+"</div>",c+="</div>",c+='<div id="wcp-editor-right">',c+="</div>",this.host.html(c),this.setListItems(a.wcpEditorGetListItems()),this.openMainTabWithName(this.options.mainTabs[0].name),this.events()},e.prototype.events=function(){var b=this;a("[data-wcp-main-tab-button-name]").on("click",function(){var c=a(this).data("wcp-main-tab-button-name");b.openMainTabWithName(c)}),a(c).off("click","#wcp-editor-button-new"),a(c).on("click","#wcp-editor-button-new",function(){a.wcpEditorEventNewButtonPressed(),b.presentCreateNewModal()}),a(c).off("click","#wcp-editor-button-save"),a(c).on("click","#wcp-editor-button-save",function(){a.wcpEditorEventSaveButtonPressed()}),a(c).off("click","#wcp-editor-button-load"),a(c).on("click","#wcp-editor-button-load",function(){a.wcpEditorEventLoadButtonPressed(),b.presentLoadModal()}),a(c).off("click","#wcp-editor-button-undo"),a(c).on("click","#wcp-editor-button-undo",function(){a.wcpEditorEventUndoButtonPressed()}),a(c).off("click","#wcp-editor-button-redo"),a(c).on("click","#wcp-editor-button-redo",function(){a.wcpEditorEventRedoButtonPressed()}),a(c).off("click","#wcp-editor-button-preview"),a(c).on("click","#wcp-editor-button-preview",function(){a.wcpEditorEventPreviewButtonPressed(),b.options.previewToggle&&(a(this).hasClass("wcp-active")?(a(this).removeClass("wcp-active"),a.wcpEditorEventExitedPreviewMode()):(a(this).addClass("wcp-active"),a.wcpEditorEventEnteredPreviewMode()))}),a(c).off("click",".wcp-editor-extra-main-button"),a(c).on("click",".wcp-editor-extra-main-button",function(c){var d=a(this).data("wcp-editor-extra-main-button-name");a.wcpEditorEventExtraMainButtonClick(d),"import"==d&&b.presentImportModal(),"export"==d&&b.presentExportModal()}),a(c).off("click",".wcp-editor-toolbar-button"),a(c).on("click",".wcp-editor-toolbar-button",function(b){a(".wcp-editor-toolbar-button").removeClass("wcp-active"),a(this).addClass("wcp-active"),a.wcpEditorEventSelectedTool(a(this).data("wcp-editor-toolbar-button-name"))}),a(c).off("click","#wcp-editor-help-button"),a(c).on("click","#wcp-editor-help-button",function(b){a.wcpEditorEventHelpButtonPressed()}),a(c).off("mouseover",".wcp-editor-list-item"),a(c).on("mouseover",".wcp-editor-list-item",function(b){a.wcpEditorEventListItemMouseover(a(this).data("wcp-editor-list-item-id"))}),a(c).off("click",".wcp-editor-list-item"),a(c).on("click",".wcp-editor-list-item",function(c){0==a(c.target).closest(".wcp-editor-list-item-buttons").length&&(b.selectListItem(a(this).data("wcp-editor-list-item-id")),a.wcpEditorEventListItemSelected(a(this).data("wcp-editor-list-item-id")))}),a(c).off("click",".wcp-editor-list-item-button"),a(c).on("click",".wcp-editor-list-item-button",function(){var b=a(this).closest(".wcp-editor-list-item").data("wcp-editor-list-item-id"),c=a(this).data("wcp-editor-list-item-button-name");a.wcpEditorEventListItemButtonPressed(b,c)}),a(c).off("mouseover","[data-wcp-tooltip]"),a(c).on("mouseover","[data-wcp-tooltip]",function(c){b.showTooltip(a(this),a(this).data("wcp-tooltip"),a(this).data("wcp-tooltip-position"))}),a(c).off("mouseout","[data-wcp-tooltip]"),a(c).on("mouseout","[data-wcp-tooltip]",function(c){b.hideTooltip(a(this))}),a(c).off("click","#wcp-editor-modal"),a(c).on("click","#wcp-editor-modal",function(c){if("wcp-editor-modal"==a(c.target).attr("id")){b.closeModal();var d=a("#wcp-editor-modal").data("wcp-editor-modal-name");a.wcpEditorEventModalClosed(d)}}),a(c).off("click",".wcp-editor-modal-close"),a(c).on("click",".wcp-editor-modal-close",function(c){b.closeModal();var d=a("#wcp-editor-modal").data("wcp-editor-modal-name");a.wcpEditorEventModalClosed(d)}),a(c).off("click",".wcp-editor-modal-button"),a(c).on("click",".wcp-editor-modal-button",function(b){var c=a("#wcp-editor-modal").data("wcp-editor-modal-name"),d=a(this).data("wcp-editor-modal-button-name");a.wcpEditorEventModalButtonClicked(c,d)}),a(c).off("click","#wcp-editor-confirm-import"),a(c).on("click","#wcp-editor-confirm-import",function(c){var e=a("#wcp-editor-textarea-import").val(),f=d;try{f=JSON.parse(e)}catch(g){console.log("error decoding JSON!")}f===d?a("#wcp-editor-import-error").show():(a("#wcp-editor-import-error").hide(),a.wcpEditorEventImportedJSON(f),b.closeModal())}),a(c).off("click","#wcp-editor-button-create-new-instance"),a(c).on("click","#wcp-editor-button-create-new-instance",function(c){if(0==a("#wcp-editor-input-create-new").val().length)a("#wcp-editor-create-new-error").show();else{a("#wcp-editor-create-new-error").hide();var d=a("#wcp-editor-input-create-new").val();a.wcpEditorEventCreatedNewInstance(d),b.closeModal()}}),a(c).off("click",".wcp-editor-save-list-item"),a(c).on("click",".wcp-editor-save-list-item",function(){var c=a(this).parent().data("wcp-editor-save-list-item-id");a.wcpEditorEventLoadSaveWithID(c),b.closeModal()}),a(c).off("click",".wcp-editor-save-list-item-delete-button"),a(c).on("click",".wcp-editor-save-list-item-delete-button",function(){b.saveToDeleteID=a(this).parent().data("wcp-editor-save-list-item-id"),b.closeModal(),b.presentDeleteSaveConfirmationModal()}),a(c).off("click","#wcp-editor-cancel-delete-save"),a(c).on("click","#wcp-editor-cancel-delete-save",function(){b.presentLoadModal()}),a(c).off("click","#wcp-editor-confirm-delete-save"),a(c).on("click","#wcp-editor-confirm-delete-save",function(){a.wcpEditorEventDeleteSaveWithID(b.saveToDeleteID,function(){b.presentLoadModal()})}),a(c).off("keyup","#wcp-editor-input-create-new"),a(c).on("keyup","#wcp-editor-input-create-new",function(b){13==b.keyCode&&a("#wcp-editor-modal").length>0&&a("#wcp-editor-modal").hasClass("wcp-editor-modal-visible")&&(1==a(".wcp-editor-modal-button-primary").length&&a(".wcp-editor-modal-button-primary").click(),1==a(".wcp-editor-modal-button-danger").length&&a(".wcp-editor-modal-button-danger").click())});var e=0,f=0,g=0,i=0,j=!1,k=!1,l=5,m=[],n=-1,o=-1,p=d,q=d,r=0,s=0,t=0;a(c).off("mousedown",".wcp-editor-list-item"),a(c).on("mousedown",".wcp-editor-list-item",function(b){e=b.pageX,f=b.pageY,j=!0,p=a(this),n=p.data("wcp-editor-list-item-index"),r=p.outerWidth(),s=p.outerHeight(),t=a("#wcp-editor-right").scrollTop()}),a(c).off("mousemove.wcp-editor-list-item-reorder"),a(c).on("mousemove.wcp-editor-list-item-reorder",function(b){var c=Math.abs(b.pageX-e),d=Math.abs(b.pageY-f);if(!k&&j&&(c>l||d>l)){k=!0,q=p.clone(),q.addClass("wcp-editor-dragged-list-item"),q.css({width:r,left:p.offset().left,top:p.offset().top}),g=p.offset().left,i=p.offset().top,a("body").prepend(q),q.wrap('<div class="wcp-editor-dragged-list-item-wrap"></div>');for(var u='<div id="wcp-editor-list-item-invisible-tmp" style="width: '+r+"px; height: "+s+'px; position: relative;"></div>',v=a("#wcp-editor-right .wcp-editor-list-item").length,w=0;v>w;w++)a('#wcp-editor-right .wcp-editor-list-item[data-wcp-editor-list-item-index="'+w+'"]').before(u),m.push(a("#wcp-editor-list-item-invisible-tmp").offset().top+s/2),a("#wcp-editor-list-item-invisible-tmp").remove();p.hide()}if(k){h(),q.css({left:g-(e-b.pageX),top:i-(f-b.pageY)});for(var x=-1,y=99999,z=q.offset().top+s/2,w=0;w<m.length;w++){var A=Math.abs(z-m[w]);y>A&&(y=A,x=w)}if(o!=x){a("#wcp-editor-list-item-visible-tmp").remove();var B='<div id="wcp-editor-list-item-visible-tmp" style="width: '+r+"px; height: "+s+'px;"><div id="wcp-editor-list-item-visible-tmp-inner"></div></div>';n>x?a('#wcp-editor-right .wcp-editor-list-item[data-wcp-editor-list-item-index="'+x+'"]').before(B):a('#wcp-editor-right .wcp-editor-list-item[data-wcp-editor-list-item-index="'+x+'"]').after(B),o=x}a("#wcp-editor-right").scrollTop(t)}}),a(c).off("mouseup.wcp-editor-list-item-reorder"),a(c).on("mouseup.wcp-editor-list-item-reorder",function(){k&&(a(".wcp-editor-dragged-list-item-wrap").remove(),a("#wcp-editor-list-item-visible-tmp").remove(),p.show(),a.wcpEditorEventListItemMoved(p.attr("id"),n,o)),j=!1,k=!1,n=-1,o=-1,m=[]})},e.prototype.openMainTabWithName=function(b){a(".wcp-editor-main-tab-content").hide(),a('[data-wcp-main-tab-content-name="'+b+'"]').show(),a(".wcp-editor-main-tab-button").removeClass("wcp-active"),a('[data-wcp-main-tab-button-name="'+b+'"]').addClass("wcp-active")},e.prototype.presentModal=function(b){if(clearTimeout(this.modalTimeout),0==a("#wcp-editor-modal").length){var c="";c+='<div id="wcp-editor-modal">',c+='   <div class="wcp-editor-modal-body">',c+='       <div class="wcp-editor-modal-close"><i class="fa fa-times" aria-hidden="true"></i></div>',c+='       <div class="wcp-editor-modal-header"></div>',c+='       <div class="wcp-editor-modal-content"></div>',c+='       <div class="wcp-editor-modal-footer"></div>',c+="       </div>",c+="   </div>",c+="</div>",a("body").append(c),this.modal=a("#wcp-editor-modal")}this.modal||(this.modal=a("#wcp-editor-modal")),this.modal.data("wcp-editor-modal-name",b.name),this.modal.find(".wcp-editor-modal-header").html(b.title),this.modal.find(".wcp-editor-modal-content").html(b.body);for(var d="",e=0;e<b.buttons.length;e++){var f="",g="";"primary"==b.buttons[e]["class"]&&(f="wcp-editor-modal-button-primary"),"danger"==b.buttons[e]["class"]&&(f="wcp-editor-modal-button-danger"),b.buttons[e].id&&(g=b.buttons[e].id),d+='<div class="wcp-editor-modal-button '+f+'" id="'+g+'" data-wcp-editor-modal-button-name="'+b.buttons[e].name+'">'+b.buttons[e].title+"</div>"}this.modal.find(".wcp-editor-modal-footer").html(d);var h=this;h.modal.css({display:"flex"}),setTimeout(function(){h.modal.addClass("wcp-editor-modal-visible")},10)},e.prototype.closeModal=function(){var a=this;this.modal.removeClass("wcp-editor-modal-visible"),this.modalTimeout=setTimeout(function(){a.modal.hide()},330)},e.prototype.presentCreateNewModal=function(){var b="";b+='<div class="wcp-editor-form-control">',b+='  <label for="wcp-editor-input-create-new">Name: </label>',b+='  <input type="text" id="wcp-editor-input-create-new">',b+='  <div id="wcp-editor-create-new-error">Please enter a name!</div>',b+="</div>";var c={name:"create_new",title:"Create New",buttons:[{name:"cancel",title:"Cancel","class":""},{name:"create",title:"Create","class":"primary",id:"wcp-editor-button-create-new-instance"}],body:b};this.presentModal(c),a("#wcp-editor-input-create-new").get(0).focus()},e.prototype.presentLoadModal=function(){var b=this;this.presentLoadingScreenWithText("Loading Saves..."),a.wcpEditorGetSaves(function(a){for(var c="",d=0;d<a.length;d++)c+='  <div class="wcp-editor-save-list-item-wrap" data-wcp-editor-save-list-item-name="'+a[d].name+'" data-wcp-editor-save-list-item-id="'+a[d].id+'">',c+='      <div class="wcp-editor-save-list-item">'+a[d].name+"</div>",c+='      <div class="wcp-editor-save-list-item-delete-button"><i class="fa fa-trash-o" aria-hidden="true"></i></div>',c+="  </div>";var e={name:"load",title:"Load",buttons:[{name:"cancel",title:"Cancel","class":""}],body:c};b.hideLoadingScreen(),b.presentModal(e)})},e.prototype.presentDeleteSaveConfirmationModal=function(){var a={name:"confirmation",title:"Delete Save",buttons:[{name:"cancel",title:"Cancel","class":"",id:"wcp-editor-cancel-delete-save"},{name:"delete",title:"Delete","class":"danger",id:"wcp-editor-confirm-delete-save"}],body:"Are you sure you want to permanently delete this save?"};this.presentModal(a)},e.prototype.presentImportModal=function(){var b="";b+='<div class="wcp-editor-form-control">',b+='   <label for="wcp-editor-textarea-import">Paste code to import:</label>',b+='   <textarea id="wcp-editor-textarea-import"></textarea>',b+='  <div id="wcp-editor-import-error">Invalid code!</div>',b+="</div>";var c={name:"import",title:"Import",buttons:[{name:"cancel",title:"Cancel","class":""},{name:"import",title:"Import","class":"primary",id:"wcp-editor-confirm-import"}],body:b};this.presentModal(c),a("#wcp-editor-textarea-import").get(0).focus()},e.prototype.presentExportModal=function(){var b="";b+='<div class="wcp-editor-form-control">',b+='   <label for="wcp-editor-textarea-export">Copy this code to import it later:</label>',b+='   <textarea id="wcp-editor-textarea-export">'+a.wcpEditorGetExportJSON()+"</textarea>",b+="</div>";var c={name:"export",title:"Export",buttons:[{name:"cancel",title:"Done","class":"primary"}],body:b};this.presentModal(c),a("#wcp-editor-textarea-export").get(0).select()},e.prototype.setContentForTabWithName=function(b,c){a('.wcp-editor-main-tab-content[data-wcp-main-tab-content-name="'+b+'"]').find(".wcp-editor-main-tab-content-inner-wrap").html(c)},e.prototype.setContentForCanvas=function(b){a("#wcp-editor-canvas").html(b)},e.prototype.setListItems=function(b){for(var c="",d=0;d<this.options.listItemButtons.length;d++){var e=this.options.listItemButtons[d];c+='<div class="wcp-editor-list-item-button" data-wcp-editor-list-item-button-name="'+e.name+'" data-wcp-tooltip="'+e.title+'" data-wcp-tooltip-position="bottom">',c+='    <i class="'+e.icon+'" aria-hidden="true"></i>',c+="</div>"}for(var f="",d=0;d<b.length;d++)f+='<div class="wcp-editor-list-item" id="wcp-editor-list-item-'+b[d].id+'" data-wcp-editor-list-item-index="'+d+'" data-wcp-editor-list-item-id="'+b[d].id+'">',f+='   <div class="wcp-editor-list-item-title">'+b[d].title+"</div>",f+='   <div class="wcp-editor-list-item-buttons">'+c+"</div>",f+="</div>";a("#wcp-editor-right").html(f)},e.prototype.selectListItem=function(b){a(".wcp-editor-list-item").removeClass("wcp-active"),a("#wcp-editor-list-item-"+b).addClass("wcp-active")},e.prototype.showTooltip=function(c,d,e){0==a("#wcp-editor-tooltip").length&&(a("body").append('<div id="wcp-editor-tooltip"></div>'),this.tooltip=a("#wcp-editor-tooltip")),this.tooltip||(this.tooltip=a("#wcp-editor-tooltip")),this.tooltip.html(d),this.tooltip.show();var f=0,g=0,h=12;"left"==e&&(f=c.offset().left-this.tooltip.outerWidth()-h,g=c.offset().top+c.outerHeight()/2-this.tooltip.outerHeight()/2),"right"==e&&(f=c.offset().left+c.outerWidth()+h,g=c.offset().top+c.outerHeight()/2-this.tooltip.outerHeight()/2),"top"==e&&(f=c.offset().left+c.outerWidth()/2-this.tooltip.outerWidth()/2,g=c.offset().top-this.tooltip.outerHeight()-h),"bottom"==e&&(f=c.offset().left+c.outerWidth()/2-this.tooltip.outerWidth()/2,g=c.offset().top+c.outerHeight()+h),this.tooltip.css({left:f,top:g}),"left"==e&&(this.tooltip.removeClass("wcp-editor-tooltip-left"),this.tooltip.removeClass("wcp-editor-tooltip-right"),this.tooltip.removeClass("wcp-editor-tooltip-top"),this.tooltip.removeClass("wcp-editor-tooltip-bottom"),this.tooltip.addClass("wcp-editor-tooltip-left")),"right"==e&&(this.tooltip.removeClass("wcp-editor-tooltip-left"),this.tooltip.removeClass("wcp-editor-tooltip-right"),this.tooltip.removeClass("wcp-editor-tooltip-top"),this.tooltip.removeClass("wcp-editor-tooltip-bottom"),this.tooltip.addClass("wcp-editor-tooltip-right")),"top"==e&&(this.tooltip.removeClass("wcp-editor-tooltip-left"),this.tooltip.removeClass("wcp-editor-tooltip-right"),this.tooltip.removeClass("wcp-editor-tooltip-top"),this.tooltip.removeClass("wcp-editor-tooltip-bottom"),this.tooltip.addClass("wcp-editor-tooltip-top")),"bottom"==e&&(this.tooltip.removeClass("wcp-editor-tooltip-left"),this.tooltip.removeClass("wcp-editor-tooltip-right"),this.tooltip.removeClass("wcp-editor-tooltip-top"),this.tooltip.removeClass("wcp-editor-tooltip-bottom"),this.tooltip.addClass("wcp-editor-tooltip-bottom")),this.tooltip.offset().left+this.tooltip.outerWidth()>b.innerWidth&&this.tooltip.css({left:b.innerWidth-this.tooltip.outerWidth()}),this.tooltip.offset().left<0&&this.tooltip.css({left:0}),this.tooltip.offset().top+this.tooltip.outerHeight()>b.innerHeight&&this.tooltip.css({top:b.innerHeight-this.tooltip.outerHeight()}),this.tooltip.offset().top<0&&this.tooltip.css({top:0}),this.tooltip.addClass("wcp-editor-tooltip-visible")},e.prototype.hideTooltip=function(){this.tooltip.hide(),this.tooltip.removeClass("wcp-editor-tooltip-visible")},e.prototype.presentLoadingScreenWithText=function(b){if(clearTimeout(this.loadingScreenTimeout),0==a("#wcp-editor-loading-screen").length){var c="";c+='<div id="wcp-editor-loading-screen">',c+='   <div id="wcp-editor-loading-screen-icon"><i class="fa fa-circle-o-notch fa-spin"></i></div>',c+='   <div id="wcp-editor-loading-screen-text"></div>',c+="</div>",a("body").append(c),this.loadingScreen=a("#wcp-editor-loading-screen")}this.loadingScreen||(this.loadingScreen=a("#wcp-editor-loading-screen")),this.loadingScreen.css({display:"flex"}),a("#wcp-editor-loading-screen-icon").html('<i class="fa fa-circle-o-notch fa-spin"></i>'),a("#wcp-editor-loading-screen-text").html(b);var d=this;setTimeout(function(){d.loadingScreen.addClass("wcp-editor-loading-screen-visible")},10)},e.prototype.updateLoadingScreenMessage=function(b){a("#wcp-editor-loading-screen-text").html(b)},e.prototype.hideLoadingScreen=function(){this.loadingScreen||(this.loadingScreen=a("#wcp-editor-loading-screen")),this.loadingScreen.removeClass("wcp-editor-loading-screen-visible");var b=this;this.loadingScreenTimeout=setTimeout(function(){b.loadingScreen.hide()},250)},e.prototype.hideLoadingScreenWithText=function(b,c){var d=this;a("#wcp-editor-loading-screen-text").html(b),c?a("#wcp-editor-loading-screen-icon").html('<i class="fa fa-times"></i>'):a("#wcp-editor-loading-screen-icon").html('<i class="fa fa-check"></i>'),setTimeout(function(){d.hideLoadingScreen()},1e3)},e.prototype.selectTool=function(b){a(".wcp-editor-toolbar-button").removeClass("wcp-active"),a('[data-wcp-editor-toolbar-button-name="'+b+'"]').addClass("wcp-active"),a.wcpEditorEventSelectedTool(b)},e.prototype.setPreviewModeOn=function(){a("#wcp-editor-button-preview").addClass("wcp-active")},e.prototype.setPreviewModeOff=function(){a("#wcp-editor-button-preview").removeClass("wcp-active")},f.prototype.init=function(){for(var b=0;b<this.options.controlGroups.length;b++)for(var c=0;c<this.options.controlGroups[b].controls.length;c++){var d=this.options.controlGroups[b].controls[c],e=a.extend(!0,{},k[d.type]),f=this,h=new g(d,e,function(){f.controlUpdated(this.name)});h.setVal(d.value),this.controls[d.name]=h}this.events()},f.prototype.events=function(b){var d=this;a(c).on("click","#"+this.id+" [data-wcp-form-tab-button-name]",function(){var b=a(this).data("wcp-form-tab-button-name");d.openFormTabWithName(b)})},f.prototype.openFormTabWithName=function(b){var c=a("#"+this.id);c.find(".wcp-editor-form-tab-content").hide(),c.find('[data-wcp-form-tab-content-name="'+b+'"]').show(),c.find(".wcp-editor-form-tab-button").removeClass("wcp-active"),c.find('[data-wcp-form-tab-button-name="'+b+'"]').addClass("wcp-active"),this.updateForm(),this.selectedTab=c.find('[data-wcp-form-tab-button-name="'+b+'"]').data("wcp-form-tab-button-index")},f.prototype.getFormHTML=function(){var a="",b="",c="";b+='<div class="wcp-editor-form-tabs-wrap">',c+='<div class="wcp-editor-form-tabs-content-wrap">';for(var d=0;d<this.options.controlGroups.length;d++){var e=this.options.controlGroups[d],f="";d==this.selectedTab&&(f="wcp-active"),b+='<div class="wcp-editor-form-tab-button '+f+'" data-wcp-form-tab-button-name="'+e.groupName+'" data-wcp-form-tab-button-index="'+d+'">',b+='   <div class="wcp-editor-form-tab-button-icon"><i class="'+e.groupIcon+'" aria-hidden="true"></i></div>',b+='   <div class="wcp-editor-form-tab-button-text">'+e.groupTitle+"</div>",b+="</div>";var g="display: none;";d==this.selectedTab&&(g=""),c+='<div class="wcp-editor-form-tab-content" data-wcp-form-tab-content-name="'+e.groupName+'" style="'+g+'">';for(var h=0;h<e.controls.length;h++){var i=e.controls[h],j="";i.tooltip&&(j='data-wcp-tooltip="'+i.tooltip.text+'" data-wcp-tooltip-position="'+i.tooltip.position+'"'),c+='<div class="wcp-editor-form-control" id="wcp-editor-form-control-'+i.name+'" '+j+">",this.controls[i.name].customLabel||(c+="   <label>"+i.title+"</label>"),c+=this.controls[i.name].HTML(),c+="</div>"}c+="</div>"}return c+="</div>",b+="</div>",a='<div class="wcp-editor-form-wrap" id="'+this.id+'">'+b+c+"</div>"},f.prototype.controlUpdated=function(b){a.wcpEditorEventFormUpdated(this.options.name,b)},f.prototype.updateForm=function(){for(var a in this.controls)this.controls[a].loadVal()},f.prototype.getModel=function(){for(var a={},b=0;b<this.options.controlGroups.length;b++){var c=this.options.controlGroups[b].groupName;a[c]={};for(var d=0;d<this.options.controlGroups[b].controls.length;d++){var e=this.options.controlGroups[b].controls[d].name,f=this.controls[e].getVal();a[c][e]=f}}return a},f.prototype.setControlValue=function(a,b){this.controls[a]&&this.controls[a].getVal()!==b&&this.controls[a].setVal(b)},f.prototype.showControlsGroup=function(b){a("#"+this.id);a('[data-wcp-form-tab-button-name="'+b+'"]').show()},f.prototype.hideControlsGroup=function(b){var c=a("#"+this.id);c.find('[data-wcp-form-tab-button-name="'+b+'"]').hide(),this.selectedTab==c.find('[data-wcp-form-tab-button-name="'+b+'"]').data("wcp-form-tab-button-index")&&(this.selectedTab=0,this.openFormTabWithName(c.find('[data-wcp-form-tab-button-index="0"]').data("wcp-form-tab-button-name")))},f.prototype.showControl=function(b){var c=a("#"+this.id);c.find("#wcp-editor-form-control-"+b).show()},f.prototype.hideControl=function(b){var c=a("#"+this.id);c.find("#wcp-editor-form-control-"+b).hide()},f.prototype.addControl=function(b,c){for(var d=0;d<this.options.controlGroups.length;d++){var e=this.options.controlGroups[d];if(e.groupName==b){e.controls.push(c);break}}var f=a.extend(!0,{},k[c.type]),h=this,i=new g(c,f,function(){h.controlUpdated(this.name)});i.setVal(c.value),this.controls[c.name]=i},f.prototype.removeControl=function(a){delete this.controls[a];for(var b=0;b<this.options.controlGroups.length;b++){for(var c=this.options.controlGroups[b],d=!1,e=0;e<c.controls.length;e++){var f=c.controls[e];if(f.name==a){c.controls.splice(e,1),d=!0;break}}if(d)break}},g.prototype.getVal=function(){return this._value},g.prototype.setVal=function(a){this._value=a;try{this.setValue(a)}catch(b){console.log(b)}},g.prototype.loadVal=function(){this.setValue(this._value)},g.prototype.valueChanged=function(){this._value=this.getValue(),this.valueUpdated()},a.wcpEditorInit=function(b){var c={canvasFill:!1,canvasWidth:800,canvasHeight:600,mainTabs:[],toolbarButtons:[],extraMainButtons:[],listItemButtons:[],newButton:!0,previewToggle:!0};i=new e,i.init(a.extend(!0,{},c,b))},a.wcpEditorRegisterControl=function(a){k[a.type]=a},a.wcpEditorCreateForm=function(a){j[a.name]=new f(a),j[a.name].init()},a.wcpEditorUpdateForm=function(a){j[a].updateForm()},a.wcpEditorFormAddControl=function(a,b,c){j[a].addControl(b,c)},a.wcpEditorFormRemoveControl=function(a,b){j[a].removeControl(b)},a.wcpEditorFormOpenTab=function(a,b){j[a].openFormTabWithName(b)},a.wcpEditorGetHTMLForFormWithName=function(a){return j[a].getFormHTML()},a.wcpEditorGetModelOfFormWithName=function(a){return j[a].getModel()},a.wcpEditorSetControlValue=function(a,b,c){j[a].setControlValue(b,c)},a.wcpEditorFormShowControlsGroup=function(a,b){j[a].showControlsGroup(b)},a.wcpEditorFormHideControlsGroup=function(a,b){j[a].hideControlsGroup(b)},a.wcpEditorFormShowControl=function(a,b){j[a].showControl(b)},a.wcpEditorFormHideControl=function(a,b){j[a].hideControl(b)},a.wcpEditorSetContentForTabWithName=function(a,b){i.setContentForTabWithName(a,b)},a.wcpEditorOpenMainTabWithName=function(a){i.openMainTabWithName(a)},a.wcpEditorSetContentForCanvas=function(a){i.setContentForCanvas(a)},a.wcpEditorSetListItems=function(a){i.setListItems(a)},a.wcpEditorSelectListItem=function(a){i.selectListItem(a)},a.wcpEditorSelectTool=function(a){i.selectTool(a)},a.wcpEditorPresentLoadingScreen=function(a){i.presentLoadingScreenWithText(a)},a.wcpEditorUpdateLoadingScreenMessage=function(a){i.updateLoadingScreenMessage(a)},a.wcpEditorHideLoadingScreen=function(){i.hideLoadingScreen()},a.wcpEditorHideLoadingScreenWithMessage=function(a,b){i.hideLoadingScreenWithText(a,b)},a.wcpEditorPresentLoadModal=function(){i.presentLoadModal()},a.wcpEditorPresentModal=function(b){var c={title:"",buttons:[],body:""};i.presentModal(a.extend(!0,{},c,b))},a.wcpEditorCloseModal=function(){i.closeModal()},a.wcpEditorSetPreviewModeOn=function(){i.setPreviewModeOn()},a.wcpEditorSetPreviewModeOff=function(){i.setPreviewModeOff()},a.wcpEditorGetContentForTabWithName=function(a){},a.wcpEditorGetContentForCanvas=function(){},a.wcpEditorGetListItems=function(){},a.wcpEditorGetSaves=function(a){},a.wcpEditorGetExportJSON=function(){return"{}"},a.wcpEditorEventFormUpdated=function(a,b){},a.wcpEditorEventNewButtonPressed=function(){},a.wcpEditorEventSaveButtonPressed=function(){},a.wcpEditorEventLoadButtonPressed=function(){},a.wcpEditorEventUndoButtonPressed=function(){},a.wcpEditorEventRedoButtonPressed=function(){},a.wcpEditorEventPreviewButtonPressed=function(){},a.wcpEditorEventEnteredPreviewMode=function(){},a.wcpEditorEventExitedPreviewMode=function(){},a.wcpEditorEventListItemMouseover=function(a){},a.wcpEditorEventListItemSelected=function(a){},a.wcpEditorEventListItemMoved=function(a,b,c){},a.wcpEditorEventListItemButtonPressed=function(a,b){},a.wcpEditorEventSelectedTool=function(a){},a.wcpEditorEventExtraMainButtonClick=function(a){},a.wcpEditorEventModalButtonClicked=function(a,b){},a.wcpEditorEventModalClosed=function(a){},a.wcpEditorEventCreatedNewInstance=function(a){},a.wcpEditorEventLoadSaveWithID=function(a){},a.wcpEditorEventDeleteSaveWithID=function(a){},a.wcpEditorEventImportedJSON=function(a){},a.wcpEditorEventHelpButtonPressed=function(){}}(jQuery,window,document);