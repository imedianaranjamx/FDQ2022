!function(a,b,c,d){function e(b,c){this.host=a(b),this.id=Math.floor(9999*Math.random())+1,this.settings=a.extend(!0,{},t),this.contentRoot=d,this.root=d,this.Window=d,this.ix=0,this.iy=0,this.iex=0,this.iey=0,this.shouldStartDraggingContainer=!1,this.didStartDraggingContainer=!1,this.draggingContainer=!1,this.draggedContainerIndex=0,this.draggedContainer=d,this.dummyContainer=d,this.containerReorderMap=d,this.newIndexOfDraggedContainer=0,this.shouldStartDraggingElement=!1,this.didStartDraggingElement=!1,this.draggingElement=!1,this.draggedElementIndex=-1,this.draggedElementContainerIndex=-1,this.elementDragMap=d,this.dummyElement=d,this.newIndexOfDraggedElement=-1,this.draggedElementWidth=-1,this.selectedElementID=d,this.loadSettings(c),this.init()}function f(){this.id="sq-container-"+Math.floor(99999*Math.random())+1,this.settings=a.extend(!0,{},u)}function g(b,c){this.id="sq-element-"+Math.floor(99999*Math.random())+1,this.settings=a.extend(!0,{},v,b),this.defaults=new Array,this.controls=new Array,this.content=this.settings.content,this.fontStyles="",this.init(c)}function h(){this.root=d,this.id=Math.floor(1e4*Math.random())+1,this.visible=!1,this.shouldStartDragging=!1,this.didStartDragging=!1,this.dragging=!1,this.iex=0,this.iey=0,this.ix=0,this.iy=0,this.init(),this.events(),this.show(600,100)}function i(a,b,c,e,f,g){this.id=Math.floor(9999*Math.random())+1,this.elementID="sq-control-"+this.id,this.elementClass="sq-element-option-group",this.type=a.type,this.getValue=a.getValue,this.setValue=a.setValue,this.HTML=a.HTML,this.name=b,this.options=f,this.group=c,this.tabGroup=e,this._value=d,this.group!==d&&(this.elementClass="sq-element-option-group-"+this.group.toLowerCase().replace(/\s/g,"-")),this.init=a.init,this.init(),this.valueUpdated=g,this.customLabel=a.customLabel}function j(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null}function k(a,b){var c={};for(var d in b)"object"==typeof b[d]?(a[d]||(a[d]={}),c[d]=k(a[d],b[d])):b[d]!=a[d]&&(c[d]=a[d]);return c}function l(a){var b=d;if("object"==typeof a)if(m(a))b=d;else for(var c in a){var e=l(a[c]);e!==d&&(b===d&&(b={}),b[c]=e)}else b=a;return b}function m(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return JSON.stringify(a)===JSON.stringify({})}function n(a){var b=8.33333333,c=b*a;return c+"%"}function o(a){return!isNaN(parseFloat(a))&&isFinite(a)}var p=d,q=new Array,r=new Array,s=new Array;a.squaresInitWithSettings=function(a,b){if(a.data.editor)for(var c=0;c<s.length;c++)s[c].id==a.data.editor.id&&s.splice(c,1);var d=new e(a,JSON.parse(b));s.push(d)},a.squaresGetCurrentSettings=function(a){return a.data.editor.generateJSON()},a.squaresGenerateHTML=function(a){return a.data.editor.generateHTML()},a.squaresRegisterElement=function(a){q.push(a)},a.squaresRegisterControl=function(a){r.push(a)},a.squaresShowEditorWindow=function(a,b){p.show(a,b)},a.squaresHideEditorWindow=function(){p.hide()},a.squaresExtendElementDefaults=function(b){v=a.extend(!0,{},v,b)},a(c).ready(function(){a(".squares").each(function(){var b=new e(this);s.push(b),a(this).data.editor=b})});var t={containers:[]};e.prototype.loadSettings=function(a){if(a&&a.containers)for(var b=0;b<a.containers.length;b++){var c=a.containers[b],d=this.appendContainer();if(c.settings.elements)for(var e=0;e<c.settings.elements.length;e++)for(var f=c.settings.elements[e],g=0;g<q.length;g++)f.settings.name==q[g].name&&d.insertElement(g,e,f.options)}},e.prototype.init=function(){this.host.data.editor=this,this.host.html(""),this.host.append('<div class="sq-root-container"></div>'),this.root=this.host.find(".sq-root-container"),this.host.find(".sq-root-container").append('<div class="sq-content"></div>'),this.contentRoot=this.host.find(".sq-content"),this.contentRoot.attr("id","sq-editor-"+this.id),this.addUI(),this.addEvents(),this.redraw(),p=new h,p.hide()},e.prototype.redraw=function(){this.contentRoot.html("");for(var b=0;b<this.settings.containers.length;b++){var c=this.settings.containers[b],d='<div class="sq-container" data-index="'+b+'" id="'+c.id+'"></div>';this.contentRoot.append(d);var e=a("#"+c.id);c.render(),c.appendEditorControls();for(var f=0;f<c.settings.elements.length;f++){var g=c.settings.elements[f],d='<div class="sq-element" data-index="'+f+'" id="'+g.id+'"></div>';e.append(d),g.render(),g.appendEditorControls()}}0==this.settings.containers.length?this.root.find(".sq-add-elements").hide():this.root.find(".sq-add-elements").show(),this.selectedElementID&&this.selectElement(this.selectedElementID)},e.prototype.addEvents=function(){var b=this;this.host.find(".sq-add-container").off("click"),this.host.find(".sq-add-container").on("click",function(){b.appendContainer(),b.redraw()}),a(c).off("mouseout","#sq-editor-"+this.id+" .sq-container"),a(c).on("mouseout","#sq-editor-"+this.id+" .sq-container",function(b){0!=a(b.target).closest(".sq-container-confirm-delete").length||a(b.target).hasClass("sq-container-confirm-delete")||0!=a(b.target).closest(".sq-container-delete").length||a(b.target).hasClass("sq-container-delete")||a(".sq-container-confirm-delete").hide()}),a(c).off("click","#sq-editor-"+this.id+" .sq-container-delete"),a(c).on("click","#sq-editor-"+this.id+" .sq-container-delete",function(){a(this).siblings(".sq-container-confirm-delete").show()}),a(c).off("click","#sq-editor-"+this.id+" .sq-container-confirm-delete"),a(c).on("click","#sq-editor-"+this.id+" .sq-container-confirm-delete",function(){b.deleteContainer(a(this).data("container-id")),b.redraw()}),a(c).off("mousedown","#sq-editor-"+b.id+" .sq-container-move"),a(c).on("mousedown","#sq-editor-"+b.id+" .sq-container-move",function(c){b.settings.containers.length<=1||(b.iex=c.pageX,b.iey=c.pageY,b.shouldStartDraggingContainer=!0,b.draggedContainerIndex=a(c.target).closest(".sq-container").data("index"),b.draggedContainer=b.host.find(".sq-container[data-index="+b.draggedContainerIndex+"]"))}),a(c).off("mousedown","#sq-editor-"+b.id+" .sq-element"),a(c).on("mousedown","#sq-editor-"+b.id+" .sq-element",function(c){(1!=b.settings.containers.length||1!=b.settings.containers[0].settings.elements.length)&&(b.iex=c.pageX,b.iey=c.pageY,b.shouldStartDraggingElement=!0,b.draggedElement=a(this),b.draggedElementIndex=a(this).data("index"),b.draggedElementContainerIndex=a(this).closest(".sq-container").data("index"))}),a(c).off("mousemove."+b.id),a(c).on("mousemove."+b.id,function(a){b.shouldStartDraggingContainer&&!b.didStartDraggingContainer&&b.startDraggingContainer(a),b.draggingContainer&&b.dragContainer(a),b.shouldStartDraggingElement&&!b.didStartDraggingElement&&b.startDraggingElement(a),b.draggingElement&&b.dragElement(a)}),a(c).off("mouseup."+b.id),a(c).on("mouseup."+b.id,function(a){b.draggingContainer&&b.endDraggingContainer(a),b.draggingElement&&b.endDraggingElement(a),b.shouldStartDraggingContainer=!1,b.didStartDraggingContainer=!1,b.draggingContainer=!1,b.draggedContainerIndex=0,b.draggedContainer=d,b.dummyContainer=d,b.shouldStartDraggingElement=!1,b.didStartDraggingElement=!1,b.draggingElement=!1,b.draggedElementIndex=-1,b.draggedElementContainerIndex=-1}),a(c).off("click."+this.id,"#sq-delete-element-button"),a(c).on("click."+this.id,"#sq-delete-element-button",function(){for(var c=a(this).data("element-id"),d=0;d<b.settings.containers.length;d++)for(var e=b.settings.containers[d],f=0;f<e.settings.elements.length;f++)e.settings.elements[f].id==c&&(e.removeElementAtIndex(f),b.redraw())})},e.prototype.startDraggingContainer=function(b){if(Math.abs(b.pageX-this.iex)>5||Math.abs(b.pageY-this.iey)>5){this.draggingContainer=!0,this.didStartDraggingContainer=!0,this.containerReorderMap=new Array;for(var c=this.draggedContainer.outerHeight()/2,d=0;d<this.settings.containers.length;d++){for(var e=c,f=d-1;f>=0;f--){var g=f;f>=this.draggedContainerIndex&&g++;var h=this.host.find(".sq-container[data-index="+g+"]");e+=h.outerHeight()}this.containerReorderMap.push(e)}this.ix=this.draggedContainer.position().left,this.iy=this.draggedContainer.position().top,this.draggedContainer.css({position:"absolute",left:this.ix,top:this.iy,width:this.draggedContainer.width()}),this.draggedContainer.addClass("sq-dragging"),this.draggedContainer.after('<div id="sq-dummy-container"></div>'),this.dummyContainer=a("#sq-dummy-container"),this.dummyContainer.css({width:this.draggedContainer.outerWidth(),height:this.draggedContainer.outerHeight()})}},e.prototype.dragContainer=function(b){this.draggedContainer.css({left:this.ix+b.pageX-this.iex,top:this.iy+b.pageY-this.iey});for(var c=this.draggedContainer.position().top+this.draggedContainer.outerHeight()/2,e=999999,f=d,g=0;g<this.containerReorderMap.length;g++)Math.abs(c-this.containerReorderMap[g])<e&&(e=Math.abs(c-this.containerReorderMap[g]),f=g);f!=this.newIndexOfDraggedContainer&&(this.newIndexOfDraggedContainer=f,this.dummyContainer.remove(),this.newIndexOfDraggedContainer<this.draggedContainerIndex?this.host.find(".sq-container[data-index="+this.newIndexOfDraggedContainer+"]").before('<div id="sq-dummy-container"></div>'):this.host.find(".sq-container[data-index="+this.newIndexOfDraggedContainer+"]").after('<div id="sq-dummy-container"></div>'),this.dummyContainer=a("#sq-dummy-container"),this.dummyContainer.css({width:this.draggedContainer.outerWidth(),height:this.draggedContainer.outerHeight()}))},e.prototype.endDraggingContainer=function(a){if(this.draggedContainerIndex!=this.newIndexOfDraggedContainer){var b=this.settings.containers[this.draggedContainerIndex];this.settings.containers.splice(this.draggedContainerIndex,1),this.settings.containers.splice(this.newIndexOfDraggedContainer,0,b)}this.redraw()},e.prototype.startDraggingElement=function(b){if(Math.abs(b.pageX-this.iex)>5||Math.abs(b.pageY-this.iey)>5){this.draggingElement=!0,this.didStartDraggingElement=!0,this.ix=this.draggedElement.offset().left,this.iy=this.draggedElement.offset().top,this.elementDragMap=new Array;var c=this.settings.containers[this.draggedElementContainerIndex].settings.elements[this.draggedElementIndex];this.draggedElementWidth=n(c.controls.layout.column_span.getVal()),this.draggedElementWidth=this.draggedElement.outerWidth();var d='<div id="sq-dummy-element-tmp" style="width: '+this.draggedElementWidth+"px; height: "+this.draggedElement.outerHeight()+'px;"></div>';this.draggedElement.hide();for(var e=0;e<this.settings.containers.length;e++){var f=this.settings.containers[e];if(0==f.settings.elements.length){this.host.find(".sq-container[data-index="+e+"]").append(d);var g=a("#sq-dummy-element-tmp");this.elementDragMap.push({x:g.offset().left+g.width()/2,y:g.offset().top+g.height()/2,containerIndex:e,elementIndex:0}),a("#sq-dummy-element-tmp").remove()}for(var h=0;h<f.settings.elements.length;h++){this.host.find(".sq-container[data-index="+e+"]").find(".sq-element[data-index="+h+"]").before(d);var g=a("#sq-dummy-element-tmp");if(this.elementDragMap.push({x:g.offset().left+g.width()/2,y:g.offset().top+g.height()/2,containerIndex:e,elementIndex:h}),a("#sq-dummy-element-tmp").remove(),h==f.settings.elements.length-1){this.host.find(".sq-container[data-index="+e+"]").find(".sq-element[data-index="+h+"]").after(d);var g=a("#sq-dummy-element-tmp");this.elementDragMap.push({x:g.offset().left+g.width()/2,y:g.offset().top+g.height()/2,containerIndex:e,elementIndex:h+1}),a("#sq-dummy-element-tmp").remove()}}}this.draggedElement.show(),this.draggedElement.after('<div id="sq-dummy-element"><div id="sq-dummy-element-inner"></div></div>'),this.dummyElement=a("#sq-dummy-element"),this.dummyElement.css({width:this.draggedElementWidth,height:this.draggedElement.outerHeight(),margin:this.draggedElement.css("margin"),padding:0});var i=this.draggedElement.width(),j=this.draggedElement.height(),k=this.draggedElement.clone().attr("id","sq-dragged-element").wrap("<div>").parent().html();this.draggedElement.hide(),a("body").prepend(k),this.draggedElement=a("#sq-dragged-element"),this.draggedElement.css({position:"absolute",left:this.ix,top:this.iy,width:i,height:j}),this.draggedElement.addClass("sq-dragging")}},e.prototype.dragElement=function(b){this.draggedElement.css({left:this.ix+b.pageX-this.iex,top:this.iy+b.pageY-this.iey});for(var c=0,d=999999,e=0;e<this.elementDragMap.length;e++){var f=Math.abs(b.pageX-this.elementDragMap[e].x)+Math.abs(b.pageY-this.elementDragMap[e].y);d>f&&(d=f,c=e)}if(c!=this.newIndexOfDraggedElement){this.newIndexOfDraggedElement=c,a("#sq-dummy-element").remove();var g=this.elementDragMap[this.newIndexOfDraggedElement].containerIndex,h=this.elementDragMap[this.newIndexOfDraggedElement].elementIndex,i=this.host.find(".sq-container[data-index="+g+"]");if(h==this.settings.containers[g].settings.elements.length)i.append('<div id="sq-dummy-element"><div id="sq-dummy-element-inner"></div></div>');else{var j=i.find(".sq-element[data-index="+h+"]");j.before('<div id="sq-dummy-element"><div id="sq-dummy-element-inner"></div></div>')}this.dummyElement=a("#sq-dummy-element"),this.dummyElement.css({width:this.draggedElementWidth,height:this.draggedElement.outerHeight(),margin:this.draggedElement.css("margin")})}},e.prototype.endDraggingElement=function(a){this.draggedElement.remove();var b=this.elementDragMap[this.newIndexOfDraggedElement].containerIndex,c=this.elementDragMap[this.newIndexOfDraggedElement].elementIndex,d=this.draggedElementIndex,e=this.draggedElementContainerIndex,f=this.settings.containers[e].settings.elements[d];this.settings.containers[e].settings.elements.splice(d,1),this.settings.containers[b].settings.elements.splice(c,0,f),this.redraw()},e.prototype.addUI=function(){this.appendAddContainerButton(),this.appendAddElementsButton()},e.prototype.appendAddContainerButton=function(){var a='<div class="sq-add-container"><i class="fa fa-plus"></i> <span>Add Container</span></div>';this.root.append(a)},e.prototype.appendAddElementsButton=function(){var a='<div class="sq-add-elements"><i class="fa fa-cube"></i></div>';this.root.append(a)},e.prototype.appendContainer=function(){var a=new f;return this.settings.containers.push(a),a},e.prototype.deleteContainer=function(a){for(var b=0,c=0;c<this.settings.containers.length;c++)this.settings.containers[c].id==a&&(b=c);this.settings.containers.splice(b,1)},e.prototype.addElement=function(a,b,c,d){var e=this;e.settings.containers[a].insertElement(c,b,d),e.redraw()},e.prototype.generateJSON=function(){for(var b=a.extend(!0,{},this.settings),c=0;c<b.containers.length;c++){for(var d=a.extend(!0,{},b.containers[c]),e=0;e<d.settings.elements.length;e++){var f=a.extend(!0,{},d.settings.elements[e]);f.settings=k(f.settings,v),f.settings=l(f.settings);var g=f.getCurrentOptions();g=k(g,f.defaults),g=l(g),d.settings.elements[e]={settings:f.settings,options:g}}b.containers[c]=d}return JSON.stringify(b)},e.prototype.generateHTML=function(){for(var a="",b=0;b<this.settings.containers.length;b++){var c=this.settings.containers[b];a+=c.generateHTML()}return a=a.replace(/\\(.)/gm,"$1"),a=a.replace(/\n/gm,"<br>")},e.prototype.selectElement=function(b){this.selectedElementID=b,a(".sq-element-selected").removeClass("sq-element-selected"),a("#"+this.selectedElementID).addClass("sq-element-selected")};var u={elements:[]};f.prototype.insertElement=function(a,b,c){var d=new g(q[a],c);this.settings.elements.splice(b,0,d)},f.prototype.removeElementAtIndex=function(a){this.settings.elements.splice(a,1),p.openFirstTab(),p.removeElementSettings()},f.prototype.render=function(){},f.prototype.appendEditorControls=function(){var b="";b+='     <div class="sq-container-move"></div>',b+='     <div class="sq-container-delete"><i class="fa fa-times" aria-hidden="true"></i></div>',b+='     <div class="sq-container-confirm-delete" data-container-id="'+this.id+'">Delete</div>',a("#"+this.id).append(b)},f.prototype.generateHTML=function(){var a="";a+='<div class="squares-container">';for(var b=0;b<this.settings.elements.length;b++){var c=this.settings.elements[b];a+=c.generateHTML()}return a+='<div class="squares-clear"></div>',a+="</div>"};var v={name:"Untitled Element",iconClass:"fa fa-cube",controls:[],defaultControls:{layout:{box_model:{name:"Box Model",type:"box model","default":{margin:{top:0,bottom:0,left:0,right:0},padding:{top:10,bottom:10,left:10,right:10}}},use_grid:{name:"Use Grid System",type:"switch","default":1},column_span:{name:"Grid Settings",type:"grid system",group:"Layout Grid","default":{xs:{use:0,"class":"col-xs-12",visible:0},sm:{use:0,"class":"col-sm-12",visible:0},md:{use:0,"class":"col-md-12",visible:1},lg:{use:1,"class":"col-lg-12",visible:1}}},width:{name:"Width",type:"int",group:"Layout Manual","default":"100"},auto_width:{name:"Auto Width",type:"switch",group:"Layout Manual","default":1},height:{name:"Height",type:"int",group:"Layout Manual","default":"100"},auto_height:{name:"Auto Height",type:"switch",group:"Layout Manual","default":1}},style:{background_color:{name:"Background Color",type:"color","default":"#ffffff"},background_opacity:{name:"Background Opacity",type:"slider",options:{min:0,max:1},"default":"0"},opacity:{name:"Opacity",type:"slider",options:{min:0,max:1},"default":"1"},box_shadow:{name:"Box Shadow",type:"text","default":"none"},border_width:{name:"Border Width",type:"slider",options:{min:0,max:20,type:"int"},"default":"0"},border_style:{name:"Border Style",type:"select",options:["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"],"default":"none"},border_color:{name:"Border Color",type:"color","default":"#000000"},border_opacity:{name:"Border Opacity",type:"slider",options:{min:0,max:1},"default":"1"},border_radius:{name:"Border Radius",type:"slider",options:{min:0,max:100,type:"int"},"default":"0"}},font:{font_family:{name:"Font Family",type:"text","default":"sans-serif"},font_size:{name:"Font Size",type:"text",format:"int","default":"14"},font_weight:{name:"Font Weight",type:"text","default":"normal"},font_style:{name:"Font Style",type:"select",options:["normal","italic","oblique","initial","inherit"],"default":"normal"},line_height:{name:"Line Height",type:"text",format:"int","default":"22"},text_color:{name:"Text Color",type:"color","default":"#000000"},text_align:{name:"Text Align",type:"select",options:["left","right","center","justify","justify-all","start","end","match-parent","inherit","initial","unset"],"default":"left"},text_decoration:{name:"Text Decoration",type:"select",options:["none","underline"],"default":"none"},text_transform:{name:"Text Transform",type:"select",options:["none","capitalize","uppercase","lowercase","initial","inherit"],"default":"none"},text_shadow:{name:"Text Shadow",type:"text","default":""}},general:{id:{name:"ID",type:"text","default":""},classes:{name:"Classes",type:"text","default":""},css:{name:"CSS",type:"text","default":""}}},defaultControlGroupIcons:{general:"fa fa-wrench",layout:"fa fa-th-large",font:"fa fa-font",style:"fa fa-paint-brush"},content:function(){return""}};g.prototype.init=function(b){this.settings.controls=a.extend(!0,{},this.settings.controls,this.settings.defaultControls),this.settings.controlGroupIcons=a.extend(!0,{},this.settings.controlGroupIcons,this.settings.defaultControlGroupIcons),this.settings.useStyleControls===!1&&(this.settings.controls.style=d),this.settings.useFontControls===!1&&(this.settings.controls.font=d);for(var c in this.settings.controls)if(this.settings.controls.hasOwnProperty(c)){var e=this.settings.controls[c];this.defaults[c]||(this.defaults[c]={});for(var f in e)if(e.hasOwnProperty(f)){var g=e[f];this.defaults[c][f]=g["default"]}}for(var c in this.settings.controls)if(this.settings.controls.hasOwnProperty(c)){var e=this.settings.controls[c];for(var f in e)if(e.hasOwnProperty(f)){for(var g=e[f],h=d,j=0;j<r.length;j++)r[j].type==g.type&&(h=r[j]);var k=g["default"];b!==d&&b[c]!==d&&b[c][f]!==d&&(k="object"==typeof b[c][f]?a.extend(!0,{},g["default"],b[c][f]):b[c][f]),this.controls[c]===d&&(this.controls[c]={});var l=this;this.controls[c][f]=new i(h,g.name,g.group,c,g.options,function(){l.updateForm(),l.render(),l.appendEditorControls()}),this.controls[c][f].setVal(k)}}},g.prototype.getSettingsForm=function(){var a="";a+='<div id="sq-window-settings-sidebar">';var b=0;for(var c in this.controls){var d='<i class="fa fa-toggle-on" aria-hidden="true"></i>';this.settings.controlGroupIcons[c]&&(d='<i class="'+this.settings.controlGroupIcons[c]+'" aria-hidden="true"></i>'),a+='<div class="sq-window-settings-sidebar-button" data-tab-index="'+b+'" data-tab-group="sq-element-settings-tab-group" data-tab-button>',a+='   <div class="sq-window-settings-sidebar-button-icon">'+d+"</div>",a+='   <div class="sq-window-settings-sidebar-button-title">'+c+"</div>",a+="</div>",b++}a+='<div class="sq-window-settings-sidebar-button" data-tab-index="'+b+'" data-tab-group="sq-element-settings-tab-group" data-tab-button>',a+='   <div class="sq-window-settings-sidebar-button-icon"><i class="fa fa-trash-o" aria-hidden="true"></i></div>',a+='   <div class="sq-window-settings-sidebar-button-title">Delete</div>',a+="</div>",a+="</div>",a+='<div class="sq-settings-window-content-wrap">';var b=0;for(var c in this.controls){a+='<div class="sq-window-content" data-tab-content data-tab-index="'+b+'" data-tab-group="sq-element-settings-tab-group">';var e=this.controls[c];b++;for(var f in e){var g=e[f];a+='<div class="sq-form-control '+g.elementClass+'">',g.customLabel?a+=g.HTML():(a+='<label for="'+g.elementID+'">'+g.name+"</label>",a+=g.HTML()),a+="</div>"}a+="</div>"}return a+='<div class="sq-window-content" data-tab-content data-tab-index="'+b+'" data-tab-group="sq-element-settings-tab-group">',a+='   <div class="sq-form-control">',a+="       <p>Delete Element?</p>",a+='       <div id="sq-delete-element-button" data-element-id="'+this.id+'">Delete</div>',a+="   </div>",a+="</div>",a+="</div>"},g.prototype.loadOptions=function(){for(var a in this.controls){var b=this.controls[a];for(var c in b){var d=b[c];d.loadVal()}}this.updateForm()},g.prototype.updateForm=function(){1==this.controls.layout.use_grid.getVal()?(a("."+this.controls.layout.width.elementClass).hide(),a("."+this.controls.layout.column_span.elementClass).show()):(a("."+this.controls.layout.width.elementClass).show(),a("."+this.controls.layout.column_span.elementClass).hide())},g.prototype.generateStyles=function(){var a="",b=this.controls.layout;o(b.box_model.getVal().margin.top)&&(a+="margin-top: "+b.box_model.getVal().margin.top+"px; "),o(b.box_model.getVal().margin.bottom)&&(a+="margin-bottom: "+b.box_model.getVal().margin.bottom+"px; "),o(b.box_model.getVal().margin.left)&&(a+="margin-left: "+b.box_model.getVal().margin.left+"px; "),o(b.box_model.getVal().margin.right)&&(a+="margin-right: "+b.box_model.getVal().margin.right+"px; "),o(b.box_model.getVal().padding.top)&&(a+="padding-top: "+b.box_model.getVal().padding.top+"px; "),o(b.box_model.getVal().padding.bottom)&&(a+="padding-bottom: "+b.box_model.getVal().padding.bottom+"px; "),o(b.box_model.getVal().padding.left)&&(a+="padding-left: "+b.box_model.getVal().padding.left+"px; "),o(b.box_model.getVal().padding.right)&&(a+="padding-right: "+b.box_model.getVal().padding.right+"px; "),1==parseInt(b.use_grid.getVal(),10)||(1==parseInt(b.auto_width.getVal(),10)?a+="width: auto; ":""===b.width.getVal()||isNaN(b.width.getVal())||(a+="width: "+b.width.getVal()+"px; "),1==parseInt(b.auto_height.getVal(),10)?a+="height: auto; ":""===b.height.getVal()||isNaN(b.height.getVal())||(a+="height: "+b.height.getVal()+"px; ")),a+="float: left; ";var b=this.controls.font;b&&(""!==b.font_family.getVal()&&(a+="font-family: "+b.font_family.getVal()+"; ",this.fontStyles+="font-family: "+b.font_family.getVal()+"; "),o(b.font_size.getVal())&&(a+="font-size: "+b.font_size.getVal()+"px; ",this.fontStyles+="font-size: "+b.font_size.getVal()+"px; "),""!==b.font_weight.getVal()&&(a+="font-weight: "+b.font_weight.getVal()+"; ",this.fontStyles+="font-weight: "+b.font_weight.getVal()+"; "),""!==b.font_style.getVal()&&(a+="font-style: "+b.font_style.getVal()+"; ",this.fontStyles+="font-style: "+b.font_style.getVal()+"; "),o(b.line_height.getVal())&&(a+="line-height: "+b.line_height.getVal()+"px; ",this.fontStyles+="line-height: "+b.line_height.getVal()+"px; "),""!==b.text_color.getVal()&&(a+="color: "+b.text_color.getVal()+"; ",this.fontStyles+="color: "+b.text_color.getVal()+"; "),""!==b.text_align.getVal()&&(a+="text-align: "+b.text_align.getVal()+"; ",this.fontStyles+="text-align: "+b.text_align.getVal()+"; "),""!==b.text_decoration.getVal()&&(a+="text-decoration: "+b.text_decoration.getVal()+"; ",this.fontStyles+="text-decoration: "+b.text_decoration.getVal()+"; "),""!==b.text_transform.getVal()&&(a+="text-transform: "+b.text_transform.getVal()+"; ",this.fontStyles+="text-transform: "+b.text_transform.getVal()+"; "),""!==b.text_shadow.getVal()&&(a+="text-shadow: "+b.text_shadow.getVal()+"; ",this.fontStyles+="text-shadow: "+b.text_shadow.getVal()+"; "));var b=this.controls.style;if(b){var c=j(b.background_color.getVal());a+="background-color: rgba("+c.r+", "+c.g+", "+c.b+", "+b.background_opacity.getVal()+"); ",o(b.opacity.getVal())&&(a+="opacity: "+b.opacity.getVal()+"; "),""!==b.box_shadow.getVal()&&(a+="box-shadow: "+b.box_shadow.getVal()+"; "),o(b.border_width.getVal())&&(a+="border-width: "+b.border_width.getVal()+"px; "),""!==b.border_style.getVal()&&(a+="border-style: "+b.border_style.getVal()+"; ");var c=j(b.border_color.getVal());a+="border-color: rgba("+c.r+", "+c.g+", "+c.b+", "+b.border_opacity.getVal()+"); ",o(b.border_radius.getVal())&&(a+="border-radius: "+b.border_radius.getVal()+"px; ")}return a},g.prototype.generateLayoutClass=function(){var a=this.controls.layout;if(1==parseInt(a.use_grid.getVal(),10)){var b="",c=a.column_span.getVal();return 1==parseInt(c.xs.use,10)&&(b+=c.xs["class"]+" ",0==parseInt(c.xs.visible,10)&&(b+="hidden-xs ")),1==parseInt(c.sm.use,10)&&(b+=c.sm["class"]+" ",0==parseInt(c.sm.visible,10)&&(b+="hidden-sm ")),1==parseInt(c.md.use,10)&&(b+=c.md["class"]+" ",0==parseInt(c.md.visible,10)&&(b+="hidden-md ")),1==parseInt(c.lg.use,10)&&(b+=c.lg["class"]+" ",0==parseInt(c.lg.visible,10)&&(b+="hidden-lg ")),b}return""},g.prototype.render=function(){var b=!1;a("#"+this.id).hasClass("sq-element-selected")&&(b=!0),a("#"+this.id).attr("style",this.generateStyles()),a("#"+this.id).attr("class","sq-element "+this.generateLayoutClass()),a("#"+this.id).html(this.content()),b&&a("#"+this.id).addClass("sq-element-selected")},g.prototype.appendEditorControls=function(){var b="";b+='     <div class="sq-element-controls">',b+='         <div class="sq-element-control-drag"></div>',b+="     </div>",a("#"+this.id).append(b)},g.prototype.getCurrentOptions=function(){var a={};for(var b in this.controls)for(var c in this.controls[b]){var d=this.controls[b][c];a[b]||(a[b]={}),a[b][c]=d.getVal()}return a},g.prototype.generateHTML=function(){var a="";return a+='<div id="'+this.id+'" class="squares-element '+this.generateLayoutClass()+'" style="'+this.generateStyles()+'">',a+=this.content(),a+="</div>"},h.prototype.init=function(){var b="";b+=' <div class="sq-window" id="sq-window-'+this.id+'">',b+='     <div class="sq-window-header">',b+='         <div class="sq-window-main-nav">',b+='             <div id="sq-window-main-nav-button-elements" class="sq-window-main-nav-button" data-tab-group="sq-window-main-tab-group" data-tab-index="0" data-tab-button><i class="fa fa-cube" aria-hidden="true"></i></div>',b+='             <div id="sq-window-main-nav-button-settings" class="sq-window-main-nav-button" data-tab-group="sq-window-main-tab-group" data-tab-index="1" data-tab-button><i class="fa fa-cog" aria-hidden="true"></i></div>',b+="         </div>",b+='         <div class="sq-window-close"><i class="fa fa-times"></i></div>',b+="     </div>",b+='     <div class="sq-window-container">',b+='         <div class="sq-window-tab-content" data-tab-group="sq-window-main-tab-group" data-tab-index="0" data-tab-content id="sq-window-elements-tab-content">',b+='             <div class="sq-window-main-tab-header">',b+="                 <h1>Elements</h1>",b+='                 <div id="sq-window-elements-search">',b+='                     <i class="fa fa-search" aria-hidden="true"></i>',b+='                     <input type="text" id="sq-window-elements-search-input">',b+="                 </div>",b+="             </div>",b+='             <div class="sq-window-content">',b+='                 <div id="sq-no-elements-found">No elements found.</div>';for(var c=0;c<q.length;c++)b+='             <div class="sq-element-thumb" data-index="'+c+'">',b+='                 <div class="sq-element-thumb-icon">',b+='                     <i class="'+q[c].iconClass+'"></i>',b+="                 </div>",b+='                 <div class="sq-element-thumb-title">',b+="                     <h2>"+q[c].name+"</h2>",b+="                 </div>",b+="             </div>";b+='                 <div class="clear"></div>',b+="             </div>",b+="         </div>",b+='         <div class="sq-window-tab-content" data-tab-group="sq-window-main-tab-group" data-tab-index="1" data-tab-content id="sq-window-settings-tab-content">',b+='             <div class="sq-window-main-tab-header"><h1>Settings</h1></div>',b+='             <div id="sq-window-settings-tab-inner-content"></div>',b+="         </div>",b+="     </div>",b+=" </div>",0==a(".sq-windows-root").length&&a("body").prepend('<div class="sq-windows-root"></div>'),a(".sq-windows-root").html(b),this.root=a("#sq-window-"+this.id),this.openFirstTab(),this.removeElementSettings()},h.prototype.events=function(){var b=this;a(c).on("keyup","#sq-window-elements-search-input",function(){var b=a(this).val().toLowerCase(),c=!1;a(".sq-element-thumb").each(function(){var d=a(this).find("h2").html();d.toLowerCase().indexOf(b)>=0?(c=!0,a(this).show()):a(this).hide()}),c?a("#sq-no-elements-found").hide():a("#sq-no-elements-found").show()}),a(c).on("click",".sq-element",function(){if(!b.visible){var c=a(this).offset().left+a(this).closest(".sq-root-container").width()+40,d=a(this).offset().top;b.show(c,d)}var e=a(this).closest(".sq-root-container").data.editor,f=a(this).closest(".sq-container").data("index"),g=a(this).data("index"),h=e.settings.containers[f].settings.elements[g];a("#sq-window-elements-tab-content").hide(),a("#sq-window-settings-tab-content").show(),a(".sq-window-main-nav-button").removeClass("active"),a("#sq-window-main-nav-button-settings").addClass("active"),a("#sq-window-settings-tab-inner-content").html(h.getSettingsForm()),h.loadOptions(),a('[data-tab-content][data-tab-group="sq-element-settings-tab-group"]').hide(),a('[data-tab-content][data-tab-group="sq-element-settings-tab-group"][data-tab-index="0"]').show(),a('[data-tab-button][data-tab-group="sq-element-settings-tab-group"]').removeClass("active").first().addClass("active"),e.selectElement(h.id)}),a(c).on("click",".sq-add-elements",function(){if(!b.visible){var c=a(this).closest(".sq-root-container").offset().left+a(this).closest(".sq-root-container").width()+40,d=a(this).closest(".sq-root-container").offset().top;b.show(c+20,d+20)}a("#sq-window-elements-tab-content").show(),a("#sq-window-settings-tab-content").hide(),a(".sq-window-main-nav-button").removeClass("active"),a("#sq-window-main-nav-button-elements").addClass("active")}),a(c).on("click","[data-tab-button]",function(){var b=a(this).data("tab-index"),c=a(this).data("tab-group");a('[data-tab-button][data-tab-group="'+c+'"]').removeClass("active"),a(this).addClass("active"),a('[data-tab-content][data-tab-group="'+c+'"]').hide(),a('[data-tab-content][data-tab-group="'+c+'"][data-tab-index="'+b+'"]').show()}),b.root.find(".sq-window-close").on("click",function(a){b.hide()}),b.root.find(".sq-window-header").off("mousedown"),b.root.find(".sq-window-header").on("mousedown",function(c){a(c.target).hasClass("sq-window-close")||a(c.target).closest(".sq-window-close").length>0||(b.shouldStartDragging=!0,b.iex=c.pageX,b.iey=c.pageY,a(".sq-window-active").removeClass("sq-window-active"),
b.root.addClass("sq-window-active"))}),a(c).on("mousemove."+b.id,function(a){b.shouldStartDragging&&!b.didStartDragging&&(Math.abs(a.pageX-b.iex)>5||Math.abs(a.pageY-b.iey)>5)&&(b.ix=b.root.offset().left,b.iy=b.root.offset().top,b.dragging=!0,b.didStartDragging=!0),b.dragging&&b.root.css({left:b.ix+a.pageX-b.iex,top:b.iy+a.pageY-b.iey})}),a(c).on("mouseup."+b.id,function(a){b.shouldStartDragging=!1,b.didStartDragging=!1,b.dragging=!1});var e=!1,f=!1,g=!1,h=-1,i=-1,j=d,k=d,l=d,m=0,n=0,o=0,p=0;a(c).off("mousedown",".sq-element-thumb"),a(c).on("mousedown",".sq-element-thumb",function(b){e=!0,m=b.pageX,n=b.pageY,j=a(this)}),a(c).off("mousemove.elementFromWindow"),a(c).on("mousemove.elementFromWindow",function(b){if(e&&!f&&(Math.abs(b.pageX-m)>5||Math.abs(b.pageY-n)>5)){f=!0,i=j.data("index");var c=j.html();o=j.offset().left,p=j.offset().top,a("body").prepend('<div id="sq-dragged-element-clone" class="sq-element-thumb">'+c+"</div>"),k=a("#sq-dragged-element-clone"),k.css({left:o,top:p,margin:0}),l=new Array;for(var d=0;d<s.length;d++)for(var q=s[d],r=0;r<q.settings.containers.length;r++){var t=q.host.find(".sq-container[data-index="+r+"]");if(0==q.settings.containers[r].settings.elements.length){t.append('<div id="sq-dummy-element-dragging-from-window-tmp"></div>');var u=a("#sq-dummy-element-dragging-from-window-tmp").offset().left+a("#sq-dummy-element-dragging-from-window-tmp").outerWidth()/2,v=a("#sq-dummy-element-dragging-from-window-tmp").offset().top+a("#sq-dummy-element-dragging-from-window-tmp").outerHeight()/2;l.push({x:u,y:v,elementIndex:0,containerIndex:r,editorIndex:d}),a("#sq-dummy-element-dragging-from-window-tmp").remove()}for(var w=0;w<q.settings.containers[r].settings.elements.length;w++){var x=t.find(".sq-element[data-index="+w+"]");x.before('<div id="sq-dummy-element-dragging-from-window-tmp"></div>');var u=a("#sq-dummy-element-dragging-from-window-tmp").offset().left+a("#sq-dummy-element-dragging-from-window-tmp").outerWidth()/2,v=a("#sq-dummy-element-dragging-from-window-tmp").offset().top+a("#sq-dummy-element-dragging-from-window-tmp").outerHeight()/2;if(l.push({x:u,y:v,elementIndex:w,containerIndex:r,editorIndex:d}),a("#sq-dummy-element-dragging-from-window-tmp").remove(),w==q.settings.containers[r].settings.elements.length-1){x.after('<div id="sq-dummy-element-dragging-from-window-tmp"></div>');var u=a("#sq-dummy-element-dragging-from-window-tmp").offset().left+a("#sq-dummy-element-dragging-from-window-tmp").outerWidth()/2,v=a("#sq-dummy-element-dragging-from-window-tmp").offset().top+a("#sq-dummy-element-dragging-from-window-tmp").outerHeight()/2;l.push({x:u,y:v,elementIndex:w+1,containerIndex:r,editorIndex:d}),a("#sq-dummy-element-dragging-from-window-tmp").remove()}}}0==l.length&&(k.remove(),f=!1,e=!1,f=!1,g=!1,h=-1)}if(f){k.css({left:o+b.pageX-m,top:p+b.pageY-n});for(var y=0,z=999999,r=0;r<l.length;r++){var A=Math.abs(b.pageX-l[r].x)+Math.abs(b.pageY-l[r].y);z>A&&(z=A,y=r)}if(y!=h){h=y,a("#sq-dummy-element-dragging-from-window").remove();var B=l[h].containerIndex,C=l[h].elementIndex,D=l[h].editorIndex,t=s[D].host.find(".sq-container[data-index="+B+"]");if(C==s[D].settings.containers[B].settings.elements.length)t.append('<div id="sq-dummy-element-dragging-from-window"><div id="sq-dummy-element-dragging-from-window-inner"></div></div>');else{var b=t.find(".sq-element[data-index="+C+"]");b.before('<div id="sq-dummy-element-dragging-from-window"><div id="sq-dummy-element-dragging-from-window-inner"></div></div>')}}}}),a(c).off("mouseup.elementFromWindow"),a(c).on("mouseup.elementFromWindow",function(){if(f){k.remove();var a=l[h].containerIndex,b=l[h].elementIndex,c=l[h].editorIndex;s[c].addElement(a,b,i)}e=!1,f=!1,g=!1,h=-1})},h.prototype.show=function(a,b){this.visible=!0,this.root.show(),a!==d&&b!==d&&this.root.css({left:a,top:b})},h.prototype.hide=function(){this.visible=!1,this.root.hide()},h.prototype.openFirstTab=function(){a(".sq-window-main-nav-button").removeClass("active"),a("#sq-window-main-nav-button-elements").addClass("active"),a('[data-tab-content][data-tab-group="sq-window-main-tab-group"]').hide(),a('[data-tab-content][data-tab-group="sq-window-main-tab-group"][data-tab-index="0"]').show()},h.prototype.removeElementSettings=function(){a("#sq-window-settings-tab-inner-content").html('<div id="sq-window-settings-tab-no-element">No element selected. To create an element, open the Elements tab and drag an element into a container.</div>')},i.prototype.getVal=function(){return this._value},i.prototype.setVal=function(a){this._value=a;try{this.setValue(a)}catch(b){}},i.prototype.loadVal=function(a){this.setValue(this._value)},i.prototype.valueChanged=function(){this._value=this.getValue(),this.valueUpdated()}}(jQuery,window,document);